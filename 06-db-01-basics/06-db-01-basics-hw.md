Задача 1
---
Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определённых данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

электронные чеки в json-виде,

склады и автомобильные дороги для логистической компании,

генеалогические деревья,

кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации,

отношения клиент-покупка для интернет-магазина.

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

**Ответ**

Электронные чеки в json-виде: Для хранения JSON-данных хорошо подходят документо-ориентированные базы данных, такие как MongoDB. Они позволяют хранить данные в формате, близком к JSON, что облегчает их обработку и извлечение.

Склады и автомобильные дороги для логистической компании: Для этого типа данных подойдут графовые базы данных. Они позволяют эффективно моделировать и анализировать сложные связи между различными объектами (например, между складами и дорогами).

Генеалогические деревья: Графовые базы данных, также подходят для моделирования генеалогических деревьев, поскольку они позволяют эффективно представлять иерархические структуры и отношения.

Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации: Для этой задачи хорошо подходят базы данных типа ключ-значение, такие как Redis. Они обеспечивают быстрый доступ к данным и поддерживают автоматическое истечение срока действия ключей.

Отношения клиент-покупка для интернет-магазина: Реляционные базы данных, такие как PostgreSQL или MySQL, отлично подходят для моделирования этого типа отношений. Они обеспечивают надежное хранение данных и поддерживают сложные запросы с использованием SQL.
***

Задача 2
---
Вы создали распределённое высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт — это отдельная реализация вашей системы и для каждого пункта нужно привести классификацию):

данные записываются на все узлы с задержкой до часа (асинхронная запись);

при сетевых сбоях система может разделиться на 2 раздельных кластера;

система может не прислать корректный ответ или сбросить соединение.

Согласно PACELC-теореме как бы вы классифицировали эти реализации?

**Ответ**

CAP-теорема гласит, что в условиях сетевых сбоев распределенная система может обеспечить только две из следующих трех гарантий: согласованность (Consistency), доступность (Availability) и устойчивость к разделению (Partition tolerance).

Данные записываются на все узлы с задержкой до часа (асинхронная запись): Эта система может быть классифицирована как AP (Availability/Partition tolerance) по CAP-теореме, так как она обеспечивает доступность и устойчивость к разделению, но не может гарантировать согласованность данных в реальном времени.

При сетевых сбоях система может разделиться на 2 раздельных кластера: Эта система может быть классифицирована как CP (Consistency/Partition tolerance) по CAP-теореме, так как она обеспечивает согласованность и устойчивость к разделению, но не может гарантировать доступность в случае сетевых сбоев.

Система может не прислать корректный ответ или сбросить соединение: Эта система может быть классифицирована как CP (Consistency/Partition tolerance) по CAP-теореме, так как она обеспечивает согласованность и устойчивость к разделению, но не может гарантировать доступность в случае сетевых сбоев.

PACELC-теорема расширяет CAP-теорему, добавляя рассмотрение задержек в условиях отсутствия разделения. В PACELC “PA” означает “Partition tolerance/Availability”, а “ELC” - “Else Latency/Consistency”.

Данные записываются на все узлы с задержкой до часа (асинхронная запись): Эта система может быть классифицирована как PA/EL по PACELC-теореме, так как она предпочитает доступность при разделении и предпочитает задержку для обеспечения согласованности в условиях отсутствия разделения.

При сетевых сбоях система может разделиться на 2 раздельных кластера: Эта система может быть классифицирована как PC/EC по PACELC-теореме, так как она предпочитает согласованность при разделении и предпочитает задержку для обеспечения согласованности в условиях отсутствия разделения.

Система может не прислать корректный ответ или сбросить соединение: Эта система может быть классифицирована как PC/EC по PACELC-теореме, так как она предпочитает согласованность при разделении и предпочитает задержку для обеспечения согласованности в условиях отсутствия разделения.
***

Задача 3
---
Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

**Ответ**

ACID (Atomicity, Consistency, Isolation, Durability) - это набор свойств, которые гарантируют надежность транзакций. В ACID-системах приоритет отдается согласованности данных и надежности.

BASE (Basically Available, Soft state, Eventually consistent) - это свойства, которые ориентированы на доступность и гибкость. В BASE-системах приоритет отдается доступности и отказоустойчивости.

Таким образом, ACID и BASE представляют собой два разных подхода к обработке транзакций и управлению данными. ACID обеспечивает строгую согласованность данных за счет уменьшения производительности и масштабируемости, в то время как BASE обеспечивает высокую доступность и масштабируемость за счет возможных временных несогласованностей данных.

В некоторых случаях системы могут использовать гибридный подход, где некоторые операции обрабатываются с использованием ACID-принципов (например, финансовые транзакции), а другие - с использованием BASE-принципов (например, пользовательские данные). Однако такие системы сложны в разработке и поддержке из-за необходимости балансировать между этими двумя подходами.

***

Задача 4
---
Вам дали задачу написать системное решение, основой которого бы послужили:

фиксация некоторых значений с временем жизни,

реакция на истечение таймаута.

Вы слышали о key-value-хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора этой системы?

**Ответ**

Redis - это хранилище данных типа ключ-значение с открытым исходным кодом, которое поддерживает различные структуры данных. Оно обладает механизмом Pub/Sub (от англ. Publisher/Subscriber - издатель/подписчик), который позволяет реализовывать модель обмена сообщениями, где издатели не программно отправляют сообщения напрямую получателям, а категоризируют опубликованные сообщения в классы без знания о том, кто подписан.

Однако, как и любая технология, Redis имеет свои недостатки:

Ограниченность памяти: Redis хранит все данные в памяти, что делает его быстрым, но ограничивает объем данных. Если у вас большой объем данных, вам придется использовать дорогостоящую оперативную память или использовать механизмы разделения данных.

Отсутствие встроенных механизмов безопасности: Redis не предоставляет встроенных механизмов безопасности, таких как аутентификация на уровне пользователя или шифрование данных. Это может создать проблемы с безопасностью, если Redis используется в открытых сетях.

Сложность согласованности данных: В режиме master-slave и при использовании Redis Cluster может возникнуть проблема согласованности данных. Если мастер упадет перед тем, как все его изменения будут скопированы на слейвы, эти изменения будут потеряны.

Отсутствие сложных запросов: В отличие от SQL-баз данных, Redis не поддерживает сложные запросы. Это означает, что приложению придется выполнять больше работы по обработке данных.
***
